{%  extends 'user/base.html' %}
{% load static %}

{% block title %}
	<title>Login - QuickPoll</title>
{% endblock title %}

{% block style %}
	<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}?{% now 'U' %}">
{% endblock style %}

{% block header %}
	<div class="jumbotron-fluid main-theme-bg wider-padding">
		<h1 class="text-center light-sky-blue-color">QuickPoll</h1>
	</div>
{% endblock header %}

{% block content %}
	<div class="container mt-5">
		<div class="row">
			<div class="col-lg-6 col-md-6 mt-4">
				<div class="text-center wider-padding d-flex flex-column">
					<h5>Create an Account</h5>
					<div class="mt-3">
						<form method="post">
							<div class="form-group">
								{% csrf_token %}
							    <label for="c-username" class="float-left">Username</label>
							    <div class="input-group">
								    <input type="text" class="form-control" id="c-username" name="username" placeholder="Enter Username" required spellcheck="false">
								    <div class="input-group-append">
								    	<button type="submit" class="btn ac-create btn-success" name="create-account" disabled>Create</button>
								    </div>
								</div>
							    <small id="usernameHelp" class="form-text float-right"></small>
							 </div>
						</form>
					</div>
				</div>
			</div>
			<div class="col-lg-6 col-md-6 mt-4">
				<div class="text-center wider-padding d-flex flex-column">
					<h5>Already have an Account.</h5>
					<div class="mt-3">
						<form method="post">
							<div class="form-group">
								{% csrf_token %}
							    <label for="l-username" class="float-left">Username</label>
							    <div class="input-group">
								    <input type="text" class="form-control" id="l-username" name="username" placeholder="Enter Username" required spellcheck="false">
								    <div class="input-group-append">
								    	<button type="submit" class="btn ac-login btn-outline-success" name="login-account">Login</button>
								    </div>
								</div>
							 </div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- <script>
		var username=document.getElementById("c-username"),usernameHelp=document.getElementById("usernameHelp"),accountCreateBtn=document.getElementsByClassName("ac-create")[0];username.onkeyup=function(){var e=this.value;e.length>0&&e.length<21?$.ajax({type:"GET",url:"{% url 'user:usernameExist' %}",data:{_username:e},success:function(a){username_regex=/[!@#$%^&*:;,.?()-=+?><~`]/,a.successfull?1==e.split(" ").length?e.match(username_regex)?(usernameHelp.innerHTML="<span class='text-danger'>There can be no Special Characters</span>",username.style.borderColor="red",username.style.boxShadow="0 0 2px red",accountCreateBtn.setAttribute("disabled",!0)):a.can_be_taken?(usernameHelp.innerHTML="<span class='text-success'>Username can be taken</span>",username.style.borderColor="green",username.style.boxShadow="0 0 4px lightgreen",accountCreateBtn.removeAttribute("disabled")):(usernameHelp.innerHTML="<span class='text-danger'>Username is already taken</span>",username.style.borderColor="red",username.style.boxShadow="0 0 2px red",accountCreateBtn.setAttribute("disabled",!0)):(usernameHelp.innerHTML="<span class='text-danger'>There should be no whitespace between username</span>",username.style.borderColor="red",username.style.boxShadow="0 0 2px red",accountCreateBtn.setAttribute("disabled",!0)):alert("Something went wrong")}}):e.length>=21?(usernameHelp.innerHTML="<span class='text-danger'>Username can't be more than 20 characters</span>",this.style.borderColor="red",this.style.boxShadow="0 0 2px red"):(usernameHelp.innerHTML="<span class='text-muted'>Username can't be left empty</span>",this.style.borderColor="grey",this.style.boxShadow="0 0 2px grey")};
	</script> -->

	{% if message %}
    <!-- Popop Model for Warning or any Message -->
    <div class="modal modal-fade" id="message-modal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <div class="d-flex justify-content-between">
              <h5 style="font-family:calibri">{{ message }}</h5>
              <button type="button" class="close" onfocus="this.style.outline='none'" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            {% if redirect_home %}
            	<div class="w-100">
            		<a href="{% url 'home:home' %}"><button class="btn btn-primary float-right">Go To Home</button></a>
            	</div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <script>
      $("#message-modal").modal('show');
    </script>
  {% endif %}

{% endblock content %}

{% block script %}
	<script type="text/javascript" src="{% static 'js/verifyUsername.js' %}"></script>
{% endblock script %}
